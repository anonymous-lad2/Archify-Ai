<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: architecture Pages: 1 -->
<svg width="1033pt" height="453pt"
 viewBox="0.00 0.00 1033.16 453.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 449)">
<title>architecture</title>
<polygon fill="#f1f5f9" stroke="transparent" points="-4,4 -4,-449 1029.16,-449 1029.16,4 -4,4"/>
<!-- rider_app -->
<g id="node1" class="node">
<title>rider_app</title>
<path fill="#7c3aed" stroke="black" stroke-width="1.2" d="M89,-54C89,-54 12,-54 12,-54 6,-54 0,-48 0,-42 0,-42 0,-12 0,-12 0,-6 6,0 12,0 12,0 89,0 89,0 95,0 101,-6 101,-12 101,-12 101,-42 101,-42 101,-48 95,-54 89,-54"/>
<text text-anchor="middle" x="50.5" y="-24.2" font-family="Arial" font-size="11.00" fill="white">Rider App</text>
</g>
<!-- api_gw -->
<g id="node3" class="node">
<title>api_gw</title>
<polygon fill="#059669" stroke="black" stroke-width="1.2" points="282.24,-266 258.16,-302 210,-302 185.92,-266 210,-230 258.16,-230 282.24,-266"/>
<text text-anchor="middle" x="234.08" y="-263.2" font-family="Arial" font-size="11.00" fill="white">API Gateway</text>
</g>
<!-- rider_app&#45;&gt;api_gw -->
<g id="edge_0" class="edge">
<title>rider_app&#45;&gt;api_gw</title>
<path fill="none" stroke="#3b82f6" stroke-width="2.5" d="M91.5,-54.05C94.85,-56.92 98.07,-59.92 101,-63 146.81,-111.25 186.45,-177.42 210.05,-220.91"/>
<polygon fill="#3b82f6" stroke="#3b82f6" stroke-width="2.5" points="207.03,-222.68 214.84,-229.84 213.19,-219.37 207.03,-222.68"/>
<text text-anchor="middle" x="143.5" y="-150.8" font-family="Arial" font-size="14.00" fill="#1e293b">Booking</text>
</g>
<!-- driver_app -->
<g id="node2" class="node">
<title>driver_app</title>
<path fill="#7c3aed" stroke="black" stroke-width="1.2" d="M1013.16,-313C1013.16,-313 936.16,-313 936.16,-313 930.16,-313 924.16,-307 924.16,-301 924.16,-301 924.16,-271 924.16,-271 924.16,-265 930.16,-259 936.16,-259 936.16,-259 1013.16,-259 1013.16,-259 1019.16,-259 1025.16,-265 1025.16,-271 1025.16,-271 1025.16,-301 1025.16,-301 1025.16,-307 1019.16,-313 1013.16,-313"/>
<text text-anchor="middle" x="974.66" y="-283.2" font-family="Arial" font-size="11.00" fill="white">Driver App</text>
</g>
<!-- driver_app&#45;&gt;api_gw -->
<g id="edge_1" class="edge">
<title>driver_app&#45;&gt;api_gw</title>
<path fill="none" stroke="#3b82f6" stroke-width="2.5" d="M958,-313.09C931.62,-354.8 874.08,-430 802.16,-430 366.66,-430 366.66,-430 366.66,-430 305.75,-430 268.34,-360.31 249.67,-311.79"/>
<polygon fill="#3b82f6" stroke="#3b82f6" stroke-width="2.5" points="252.94,-310.56 246.19,-302.4 246.38,-312.99 252.94,-310.56"/>
<text text-anchor="middle" x="612.16" y="-433.8" font-family="Arial" font-size="14.00" fill="#1e293b">Status</text>
</g>
<!-- auth -->
<g id="node4" class="node">
<title>auth</title>
<path fill="#dc2626" stroke="black" stroke-width="1.2" d="M402.66,-400C402.66,-400 332.66,-400 332.66,-400 326.66,-400 320.66,-394 320.66,-388 320.66,-388 320.66,-354 320.66,-354 320.66,-348 326.66,-342 332.66,-342 332.66,-342 402.66,-342 402.66,-342 408.66,-342 414.66,-348 414.66,-354 414.66,-354 414.66,-388 414.66,-388 414.66,-394 408.66,-400 402.66,-400"/>
<text text-anchor="middle" x="367.66" y="-368.2" font-family="Arial" font-size="11.00" fill="white">Auth</text>
</g>
<!-- api_gw&#45;&gt;auth -->
<g id="edge_2" class="edge">
<title>api_gw&#45;&gt;auth</title>
<path fill="none" stroke="#10b981" d="M265.93,-290.62C282.53,-303.86 303.31,-320.45 321.68,-335.1"/>
<polygon fill="none" stroke="#10b981" points="332.42,-338.56 327.43,-344.81 321.18,-339.82 326.17,-333.57 332.42,-338.56"/>
<polyline fill="none" stroke="#10b981" points="323.67,-336.69 322.11,-335.45 "/>
</g>
<!-- matching -->
<g id="node5" class="node">
<title>matching</title>
<path fill="#dc2626" stroke="black" stroke-width="1.2" d="M404.16,-324C404.16,-324 331.16,-324 331.16,-324 325.16,-324 319.16,-318 319.16,-312 319.16,-312 319.16,-278 319.16,-278 319.16,-272 325.16,-266 331.16,-266 331.16,-266 404.16,-266 404.16,-266 410.16,-266 416.16,-272 416.16,-278 416.16,-278 416.16,-312 416.16,-312 416.16,-318 410.16,-324 404.16,-324"/>
<text text-anchor="middle" x="367.66" y="-292.2" font-family="Arial" font-size="11.00" fill="white">Matching Engine</text>
</g>
<!-- api_gw&#45;&gt;matching -->
<g id="edge_3" class="edge">
<title>api_gw&#45;&gt;matching</title>
<path fill="none" stroke="#10b981" d="M276.35,-275.1C286.74,-277.39 298.08,-279.88 309.1,-282.31"/>
<polygon fill="none" stroke="#10b981" points="319.96,-280.61 318.24,-288.42 310.43,-286.7 312.15,-278.89 319.96,-280.61"/>
<polyline fill="none" stroke="#10b981" points="311.29,-282.8 309.34,-282.37 "/>
</g>
<!-- location -->
<g id="node6" class="node">
<title>location</title>
<path fill="#dc2626" stroke="black" stroke-width="1.2" d="M403.66,-246C403.66,-246 331.66,-246 331.66,-246 325.66,-246 319.66,-240 319.66,-234 319.66,-234 319.66,-200 319.66,-200 319.66,-194 325.66,-188 331.66,-188 331.66,-188 403.66,-188 403.66,-188 409.66,-188 415.66,-194 415.66,-200 415.66,-200 415.66,-234 415.66,-234 415.66,-240 409.66,-246 403.66,-246"/>
<text text-anchor="middle" x="367.66" y="-214.2" font-family="Arial" font-size="11.00" fill="white">Location Service</text>
</g>
<!-- api_gw&#45;&gt;location -->
<g id="edge_4" class="edge">
<title>api_gw&#45;&gt;location</title>
<path fill="none" stroke="#10b981" d="M273.14,-251.83C284.63,-247.55 297.5,-242.75 309.94,-238.12"/>
<polygon fill="none" stroke="#10b981" points="317.93,-230.88 320.72,-238.37 313.23,-241.17 310.44,-233.67 317.93,-230.88"/>
<polyline fill="none" stroke="#10b981" points="311.83,-237.42 309.96,-238.12 "/>
</g>
<!-- payment -->
<g id="node7" class="node">
<title>payment</title>
<path fill="#dc2626" stroke="black" stroke-width="1.2" d="M402.66,-170C402.66,-170 332.66,-170 332.66,-170 326.66,-170 320.66,-164 320.66,-158 320.66,-158 320.66,-124 320.66,-124 320.66,-118 326.66,-112 332.66,-112 332.66,-112 402.66,-112 402.66,-112 408.66,-112 414.66,-118 414.66,-124 414.66,-124 414.66,-158 414.66,-158 414.66,-164 408.66,-170 402.66,-170"/>
<text text-anchor="middle" x="367.66" y="-138.2" font-family="Arial" font-size="11.00" fill="white">Payment</text>
</g>
<!-- api_gw&#45;&gt;payment -->
<g id="edge_5" class="edge">
<title>api_gw&#45;&gt;payment</title>
<path fill="none" stroke="#10b981" d="M262.59,-235.67C278.59,-218.51 299.44,-196.96 319.16,-179 319.98,-178.25 320.81,-177.5 321.66,-176.75"/>
<polygon fill="none" stroke="#10b981" points="326.83,-166.98 332.07,-173.03 326.02,-178.27 320.79,-172.22 326.83,-166.98"/>
<polyline fill="none" stroke="#10b981" points="323.4,-175.24 321.89,-176.55 "/>
</g>
<!-- cache -->
<g id="node11" class="node">
<title>cache</title>
<polygon fill="lightgrey" stroke="black" points="653.16,-394 571.16,-394 571.16,-358 653.16,-358 653.16,-394"/>
<text text-anchor="middle" x="612.16" y="-373.2" font-family="Arial" font-size="11.00" fill="white">Redis Cluster</text>
</g>
<!-- matching&#45;&gt;cache -->
<g id="edge_8" class="edge">
<title>matching&#45;&gt;cache</title>
<path fill="none" stroke="#6b7280" stroke-dasharray="5,2" d="M416.35,-316.12C422.3,-318.54 428.35,-320.89 434.16,-323 476.48,-338.33 525.58,-352.77 561.31,-362.7"/>
<polygon fill="#6b7280" stroke="#6b7280" points="560.45,-366.09 571.02,-365.38 562.31,-359.34 560.45,-366.09"/>
</g>
<!-- ml_service -->
<g id="node13" class="node">
<title>ml_service</title>
<polygon fill="lightgrey" stroke="black" stroke-dasharray="5,2" points="666.16,-339.5 558.16,-339.5 558.16,-274.5 666.16,-274.5 666.16,-339.5"/>
<text text-anchor="middle" x="612.16" y="-304.2" font-family="Arial" font-size="11.00" fill="white">ML Model Service</text>
</g>
<!-- matching&#45;&gt;ml_service -->
<g id="edge_9" class="edge">
<title>matching&#45;&gt;ml_service</title>
<path fill="none" stroke="black" d="M416.28,-297.36C453.79,-299.21 506.44,-301.82 547.55,-303.85"/>
<polygon fill="black" stroke="black" points="557.74,-304.36 547.53,-308.36 552.75,-304.11 547.76,-303.86 547.76,-303.86 547.76,-303.86 552.75,-304.11 547.98,-299.37 557.74,-304.36 557.74,-304.36"/>
<text text-anchor="middle" x="487.16" y="-307.8" font-family="Arial" font-size="14.00" fill="#1e293b">ETA Prediction</text>
</g>
<!-- geospatial_db -->
<g id="node9" class="node">
<title>geospatial_db</title>
<path fill="#b91c1c" stroke="black" stroke-width="1.2" d="M659.16,-249.32C659.16,-253.28 638.09,-256.5 612.16,-256.5 586.23,-256.5 565.16,-253.28 565.16,-249.32 565.16,-249.32 565.16,-184.68 565.16,-184.68 565.16,-180.72 586.23,-177.5 612.16,-177.5 638.09,-177.5 659.16,-180.72 659.16,-184.68 659.16,-184.68 659.16,-249.32 659.16,-249.32"/>
<path fill="none" stroke="black" stroke-width="1.2" d="M659.16,-249.32C659.16,-245.36 638.09,-242.14 612.16,-242.14 586.23,-242.14 565.16,-245.36 565.16,-249.32"/>
<text text-anchor="middle" x="612.16" y="-214.2" font-family="Arial" font-size="11.00" fill="white">PostGIS DB</text>
</g>
<!-- location&#45;&gt;geospatial_db -->
<g id="edge_6" class="edge">
<title>location&#45;&gt;geospatial_db</title>
<path fill="none" stroke="#f59e0b" stroke-dasharray="1,5" d="M415.7,-217C455.53,-217 512.71,-217 554.95,-217"/>
<polygon fill="#f59e0b" stroke="#f59e0b" points="555.07,-217 565.07,-221.5 560.07,-217 565.07,-217 565.07,-217 565.07,-217 560.07,-217 565.07,-212.5 555.07,-217 555.07,-217"/>
<text text-anchor="middle" x="487.16" y="-220.8" font-family="Arial" font-size="14.00" fill="#1e293b">Spatial Query</text>
</g>
<!-- pubsub -->
<g id="node12" class="node">
<title>pubsub</title>
<polygon fill="lightgrey" stroke="black" points="657.16,-159 567.16,-159 567.16,-123 657.16,-123 657.16,-159"/>
<text text-anchor="middle" x="612.16" y="-138.2" font-family="Arial" font-size="11.00" fill="white">Kafka/Pub&#45;Sub</text>
</g>
<!-- location&#45;&gt;pubsub -->
<g id="edge_7" class="edge">
<title>location&#45;&gt;pubsub</title>
<path fill="none" stroke="#3b82f6" stroke-width="2" d="M415.7,-202.26C456.34,-189.52 515.04,-171.12 557.5,-157.82"/>
<polygon fill="#3b82f6" stroke="#3b82f6" stroke-width="2" points="558.61,-161.14 567.11,-154.81 556.52,-154.46 558.61,-161.14"/>
<text text-anchor="middle" x="487.16" y="-198.8" font-family="Arial" font-size="14.00" fill="#1e293b">Location Updates</text>
</g>
<!-- payment&#45;&gt;pubsub -->
<g id="edge_11" class="edge">
<title>payment&#45;&gt;pubsub</title>
<path fill="none" stroke="#3b82f6" stroke-width="2" d="M414.84,-141C455.21,-141 513.89,-141 556.57,-141"/>
<polygon fill="#3b82f6" stroke="#3b82f6" stroke-width="2" points="556.79,-144.5 566.79,-141 556.79,-137.5 556.79,-144.5"/>
<text text-anchor="middle" x="487.16" y="-144.8" font-family="Arial" font-size="14.00" fill="#1e293b">Payment Events</text>
</g>
<!-- payment_gateway -->
<g id="node14" class="node">
<title>payment_gateway</title>
<polygon fill="lightgrey" stroke="black" stroke-dasharray="5,2" points="666.16,-104.5 558.16,-104.5 558.16,-39.5 666.16,-39.5 666.16,-104.5"/>
<text text-anchor="middle" x="612.16" y="-69.2" font-family="Arial" font-size="11.00" fill="white">Stripe/Square</text>
</g>
<!-- payment&#45;&gt;payment_gateway -->
<g id="edge_10" class="edge">
<title>payment&#45;&gt;payment_gateway</title>
<path fill="none" stroke="#3b82f6" stroke-width="2.5" d="M414.81,-127.57C421.31,-125.69 427.9,-123.79 434.16,-122 472.02,-111.16 514.48,-99.16 548.32,-89.64"/>
<polygon fill="#3b82f6" stroke="#3b82f6" stroke-width="2.5" points="549.4,-92.97 558.08,-86.89 547.5,-86.23 549.4,-92.97"/>
<text text-anchor="middle" x="487.16" y="-125.8" font-family="Arial" font-size="14.00" fill="#1e293b">Charge</text>
</g>
<!-- notification -->
<g id="node8" class="node">
<title>notification</title>
<polygon fill="lightgrey" stroke="black" points="857.16,-159 745.16,-159 745.16,-123 857.16,-123 857.16,-159"/>
<text text-anchor="middle" x="801.16" y="-138.2" font-family="Arial" font-size="11.00" fill="white">Notification Lambda</text>
</g>
<!-- notification&#45;&gt;rider_app -->
<g id="edge_13" class="edge">
<title>notification&#45;&gt;rider_app</title>
<path fill="none" stroke="black" d="M786.93,-122.92C759.1,-87.2 690.66,-11 613.16,-11 233.08,-11 233.08,-11 233.08,-11 192.32,-11 146.62,-15.05 111.26,-19.07"/>
<polygon fill="black" stroke="black" points="101.11,-20.26 110.52,-14.63 106.07,-19.68 111.04,-19.1 111.04,-19.1 111.04,-19.1 106.07,-19.68 111.56,-23.57 101.11,-20.26 101.11,-20.26"/>
<text text-anchor="middle" x="367.66" y="-14.8" font-family="Arial" font-size="14.00" fill="#1e293b">Push</text>
</g>
<!-- notification&#45;&gt;driver_app -->
<g id="edge_14" class="edge">
<title>notification&#45;&gt;driver_app</title>
<path fill="none" stroke="black" d="M823.53,-159.07C850.97,-182.26 899.11,-222.97 933.49,-252.03"/>
<polygon fill="black" stroke="black" points="941.47,-258.78 930.93,-255.76 937.65,-255.56 933.83,-252.33 933.83,-252.33 933.83,-252.33 937.65,-255.56 936.74,-248.89 941.47,-258.78 941.47,-258.78"/>
<text text-anchor="middle" x="890.66" y="-230.8" font-family="Arial" font-size="14.00" fill="#1e293b">Push</text>
</g>
<!-- user_db -->
<g id="node10" class="node">
<title>user_db</title>
<path fill="#b91c1c" stroke="black" stroke-width="1.2" d="M97.5,-144.32C97.5,-148.28 76.43,-151.5 50.5,-151.5 24.57,-151.5 3.5,-148.28 3.5,-144.32 3.5,-144.32 3.5,-79.68 3.5,-79.68 3.5,-75.72 24.57,-72.5 50.5,-72.5 76.43,-72.5 97.5,-75.72 97.5,-79.68 97.5,-79.68 97.5,-144.32 97.5,-144.32"/>
<path fill="none" stroke="black" stroke-width="1.2" d="M97.5,-144.32C97.5,-140.36 76.43,-137.14 50.5,-137.14 24.57,-137.14 3.5,-140.36 3.5,-144.32"/>
<text text-anchor="middle" x="50.5" y="-109.2" font-family="Arial" font-size="11.00" fill="white">User DB</text>
</g>
<!-- pubsub&#45;&gt;notification -->
<g id="edge_12" class="edge">
<title>pubsub&#45;&gt;notification</title>
<path fill="none" stroke="#3b82f6" stroke-width="2" d="M657.48,-141C680.65,-141 709.45,-141 735.1,-141"/>
<polygon fill="#3b82f6" stroke="#3b82f6" stroke-width="2" points="735.12,-144.5 745.12,-141 735.12,-137.5 735.12,-144.5"/>
<text text-anchor="middle" x="705.66" y="-144.8" font-family="Arial" font-size="14.00" fill="#1e293b">Trigger</text>
</g>
</g>

    <style>
        @keyframes flowRight {
            0% { stroke-dashoffset: 20; }
            100% { stroke-dashoffset: 0; }
        }
        
        @keyframes flowLeft {
            0% { stroke-dashoffset: -20; }
            100% { stroke-dashoffset: 0; }
        }
        
        /* Default flow direction (left to right, arrow ->)
           Positive stroke-dashoffset moves pattern LEFT, so negative offset = RIGHT flow */
        svg g[id*="edge"] path {
            animation: flowRight 1.5s linear infinite;
            stroke-dasharray: 8,4;
            stroke-width: 2.5;
        }
        
        /* Pulse effect on nodes */
        svg g[id*="node"] ellipse,
        svg g[id*="node"] polygon,
        svg g[id*="node"] path {
            transition: filter 0.3s ease;
        }
        
        svg g[id*="node"]:hover ellipse,
        svg g[id*="node"]:hover polygon,
        svg g[id*="node"]:hover path {
            filter: drop-shadow(0 0 10px rgba(60,60,60,0.5));
        }
        
        /* Edge labels stay readable */
        svg g[id*="edge"] text {
            background: white;
            font-weight: bold;
        }
    </style>
    </svg>
